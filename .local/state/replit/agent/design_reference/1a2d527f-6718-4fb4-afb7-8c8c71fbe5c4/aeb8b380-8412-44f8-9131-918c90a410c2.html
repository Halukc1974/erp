<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhasebe ERP Sistemi - Ana Sayfa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#1976d2',
                        'primary-dark': '#1565c0',
                        'secondary': '#424242',
                        'accent': '#ff9800',
                        'success': '#4caf50',
                        'error': '#f44336',
                        'warning': '#ff9800',
                        'surface': '#ffffff',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- @COMPONENT: MainLayout -->
    <div class="flex h-screen bg-gray-50">
        <!-- @COMPONENT: Sidebar -->
        <aside class="w-80 bg-white shadow-lg flex flex-col">
            <!-- Logo/Header -->
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-calculator text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">Muhasebe ERP</h1>
                        <p class="text-sm text-gray-500">v3.0 Tiger Edition</p>
                    </div>
                </div>
            </div>

            <!-- User Info -->
            <div class="p-4 border-b border-gray-200 bg-gray-50">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-900" data-bind="user.name">Ahmet Yılmaz</p>
                        <p class="text-xs text-gray-500" data-bind="user.role">Mali Müşavir</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 overflow-y-auto py-4">
                <!-- Dashboard -->
                <div class="px-4 mb-6">
                    <a href="#" class="flex items-center space-x-3 text-primary bg-primary/10 rounded-lg p-3 font-medium">
                        <i class="fas fa-tachometer-alt w-5"></i>
                        <span>Ana Sayfa</span>
                    </a>
                </div>

                <!-- Accounting Modules -->
                <div class="px-4 mb-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Muhasebe & Finans</h3>
                    <div class="space-y-1">
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-book w-5"></i>
                            <span>Genel Muhasebe</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-money-bill w-5"></i>
                            <span>Borç-Alacak</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-credit-card w-5"></i>
                            <span>Kredi Yönetimi</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-university w-5"></i>
                            <span>Banka Teminatları</span>
                        </a>
                    </div>
                </div>

                <!-- Commercial -->
                <div class="px-4 mb-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Ticaret & Satış</h3>
                    <div class="space-y-1">
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-shopping-cart w-5"></i>
                            <span>Satın Alma</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-truck w-5"></i>
                            <span>Sipariş Yönetimi</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-users w-5"></i>
                            <span>Müşteri Yönetimi</span>
                        </a>
                    </div>
                </div>

                <!-- Operations -->
                <div class="px-4 mb-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Operasyon</h3>
                    <div class="space-y-1">
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-hard-hat w-5"></i>
                            <span>Taşeron Puantaj</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-building w-5"></i>
                            <span>Merkez Giderleri</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-file-invoice w-5"></i>
                            <span>Belge Yönetimi</span>
                        </a>
                    </div>
                </div>

                <!-- Reports -->
                <div class="px-4 mb-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Raporlar & Analiz</h3>
                    <div class="space-y-1">
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-chart-line w-5"></i>
                            <span>Mali Raporlar</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 text-gray-700 hover:text-primary hover:bg-gray-100 rounded-lg p-3 transition-colors">
                            <i class="fas fa-file-alt w-5"></i>
                            <span>VUK Uyumluluk</span>
                        </a>
                    </div>
                </div>
            </nav>

            <!-- Footer -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center justify-between text-xs text-gray-500">
                    <span>Supabase bağlantısı aktif</span>
                    <div class="w-2 h-2 bg-success rounded-full"></div>
                </div>
            </div>
        </aside>
        <!-- @END_COMPONENT: Sidebar -->

        <!-- @COMPONENT: MainContent -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Muhasebe Dashboard</h1>
                        <p class="text-gray-600">Hoşgeldiniz, bugünkü mali durumunuz</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Currency Selector -->
                        <div class="flex items-center space-x-2 bg-gray-100 rounded-lg p-2">
                            <i class="fas fa-globe text-gray-500"></i>
                            <select class="bg-transparent text-sm font-medium text-gray-700 border-none focus:outline-none">
                                <option>TRY - Türk Lirası</option>
                                <option>USD - Amerikan Doları</option>
                                <option>EUR - Euro</option>
                            </select>
                        </div>
                        <!-- Date Range -->
                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                            <i class="fas fa-calendar"></i>
                            <span data-bind="currentPeriod">Aralık 2024</span>
                        </div>
                        <!-- Notifications -->
                        <button class="relative p-2 text-gray-400 hover:text-gray-600">
                            <i class="fas fa-bell"></i>
                            <span class="absolute -top-1 -right-1 w-4 h-4 bg-error text-white text-xs rounded-full flex items-center justify-center">3</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="flex-1 overflow-auto p-6">
                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-success/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-arrow-up text-success"></i>
                            </div>
                            <span class="text-xs bg-success/10 text-success px-2 py-1 rounded-full">+12.5%</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 font-mono" data-bind="metrics.totalRevenue">₺2,847,500</h3>
                        <p class="text-gray-600 text-sm">Toplam Gelir</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-error/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-arrow-down text-error"></i>
                            </div>
                            <span class="text-xs bg-error/10 text-error px-2 py-1 rounded-full">-5.2%</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 font-mono" data-bind="metrics.totalExpenses">₺1,923,200</h3>
                        <p class="text-gray-600 text-sm">Toplam Gider</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-wallet text-primary"></i>
                            </div>
                            <span class="text-xs bg-warning/10 text-warning px-2 py-1 rounded-full">Sabit</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 font-mono" data-bind="metrics.cashFlow">₺924,300</h3>
                        <p class="text-gray-600 text-sm">Nakit Akışı</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center">
                                <i class="fas fa-file-invoice-dollar text-accent"></i>
                            </div>
                            <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">23 Bekliyor</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 font-mono" data-bind="metrics.pendingInvoices">₺156,750</h3>
                        <p class="text-gray-600 text-sm">Bekleyen Faturalar</p>
                    </div>
                </div>

                <!-- Charts and Analytics -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Revenue Chart -->
                    <div class="lg:col-span-2 bg-white rounded-xl shadow-sm p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Aylık Gelir Analizi</h3>
                            <div class="flex items-center space-x-2">
                                <button class="text-xs px-3 py-1 bg-primary text-white rounded-full">2024</button>
                                <button class="text-xs px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-full">2023</button>
                            </div>
                        </div>
                        <div class="h-80">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>

                    <!-- Expense Breakdown -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Gider Dağılımı</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-primary rounded-full"></div>
                                    <span class="text-sm text-gray-700">Personel</span>
                                </div>
                                <span class="text-sm font-mono">₺892,400</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-success rounded-full"></div>
                                    <span class="text-sm text-gray-700">Malzeme</span>
                                </div>
                                <span class="text-sm font-mono">₺634,200</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-warning rounded-full"></div>
                                    <span class="text-sm text-gray-700">Kira & Genel</span>
                                </div>
                                <span class="text-sm font-mono">₺396,600</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 bg-error rounded-full"></div>
                                    <span class="text-sm text-gray-700">Diğer</span>
                                </div>
                                <span class="text-sm font-mono">₺156,200</span>
                            </div>
                        </div>
                        <div class="mt-6 pt-4 border-t border-gray-200">
                            <div class="h-32">
                                <canvas id="expenseChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Transactions Table -->
                <div class="bg-white rounded-xl shadow-sm">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-gray-900">Son İşlemler</h3>
                            <div class="flex items-center space-x-3">
                                <button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
                                    <i class="fas fa-filter mr-2"></i>Filtrele
                                </button>
                                <button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
                                    <i class="fas fa-download mr-2"></i>Dışa Aktar
                                </button>
                                <button class="px-4 py-2 bg-primary text-white text-sm rounded-lg hover:bg-primary-dark transition-colors">
                                    <i class="fas fa-plus mr-2"></i>Yeni İşlem
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <!-- @FUNCTIONALITY: This table should implement Excel-like functionality using Tabulator.js -->
                        <div id="transactionsTable" data-implementation="Initialize Tabulator with real-time Supabase data"></div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <button class="p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left">
                        <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mb-3">
                            <i class="fas fa-receipt text-primary"></i>
                        </div>
                        <h4 class="font-medium text-gray-900 mb-1">Fatura Oluştur</h4>
                        <p class="text-sm text-gray-600">Yeni satış faturası düzenle</p>
                    </button>

                    <button class="p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left">
                        <div class="w-10 h-10 bg-success/10 rounded-lg flex items-center justify-center mb-3">
                            <i class="fas fa-money-check-alt text-success"></i>
                        </div>
                        <h4 class="font-medium text-gray-900 mb-1">Ödeme Kaydet</h4>
                        <p class="text-sm text-gray-600">Alınan/verilen ödeme girişi</p>
                    </button>

                    <button class="p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left">
                        <div class="w-10 h-10 bg-warning/10 rounded-lg flex items-center justify-center mb-3">
                            <i class="fas fa-clock text-warning"></i>
                        </div>
                        <h4 class="font-medium text-gray-900 mb-1">Puantaj Gir</h4>
                        <p class="text-sm text-gray-600">Taşeron çalışma saatleri</p>
                    </button>

                    <button class="p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left">
                        <div class="w-10 h-10 bg-error/10 rounded-lg flex items-center justify-center mb-3">
                            <i class="fas fa-chart-bar text-error"></i>
                        </div>
                        <h4 class="font-medium text-gray-900 mb-1">Rapor Oluştur</h4>
                        <p class="text-sm text-gray-600">Mali durum raporu</p>
                    </button>
                </div>
            </div>
        </main>
        <!-- @END_COMPONENT: MainContent -->
    </div>
    <!-- @END_COMPONENT: MainLayout -->

    <script>
        (function() {
            // Initialize Charts
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki', 'Kas', 'Ara'],
                    datasets: [{
                        label: 'Gelir (TRY)',
                        data: [1200000, 1350000, 1420000, 1680000, 1890000, 2100000, 2280000, 2150000, 2350000, 2420000, 2680000, 2847500],
                        borderColor: '#1976d2',
                        backgroundColor: 'rgba(25, 118, 210, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return '₺' + (value / 1000000).toFixed(1) + 'M';
                                }
                            }
                        }
                    }
                }
            });

            const expenseCtx = document.getElementById('expenseChart').getContext('2d');
            const expenseChart = new Chart(expenseCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Personel', 'Malzeme', 'Kira & Genel', 'Diğer'],
                    datasets: [{
                        data: [892400, 634200, 396600, 156200],
                        backgroundColor: ['#1976d2', '#4caf50', '#ff9800', '#f44336'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Initialize Tabulator Table
            const table = new Tabulator("#transactionsTable", {
                height: "400px",
                data: [
                    {id: 1, date: "2024-12-15", description: "ABC Müşteri - Fatura #2024-001", category: "Gelir", amount: 45000, currency: "TRY", status: "Onaylandı"},
                    {id: 2, date: "2024-12-14", description: "XYZ Tedarikçi - Malzeme Alımı", category: "Gider", amount: -12500, currency: "TRY", status: "Ödendi"},
                    {id: 3, date: "2024-12-13", description: "Taşeron Bordro - Aralık 2024", category: "Bordro", amount: -23000, currency: "TRY", status: "İşlemde"},
                    {id: 4, date: "2024-12-12", description: "DEF Ltd. - İhracat Faturası", category: "Gelir", amount: 67500, currency: "USD", status: "Onaylandı"},
                    {id: 5, date: "2024-12-11", description: "Ofis Kirası - Aralık", category: "Gider", amount: -15000, currency: "TRY", status: "Ödendi"}
                ],
                layout: "fitColumns",
                columns: [
                    {title: "Tarih", field: "date", width: 120, sorter: "date"},
                    {title: "Açıklama", field: "description", width: 300},
                    {title: "Kategori", field: "category", width: 100, 
                     formatter: function(cell) {
                         const value = cell.getValue();
                         const colors = {
                             'Gelir': 'bg-success/10 text-success',
                             'Gider': 'bg-error/10 text-error',
                             'Bordro': 'bg-warning/10 text-warning'
                         };
                         return `<span class="px-2 py-1 rounded-full text-xs ${colors[value] || 'bg-gray-100 text-gray-600'}">${value}</span>`;
                     }
                    },
                    {title: "Tutar", field: "amount", width: 120, 
                     formatter: function(cell) {
                         const value = cell.getValue();
                         const row = cell.getRow().getData();
                         const color = value < 0 ? 'text-error' : 'text-success';
                         const currency = row.currency === 'USD' ? '$' : '₺';
                         return `<span class="font-mono ${color}">${currency}${Math.abs(value).toLocaleString()}</span>`;
                     }
                    },
                    {title: "Para Birimi", field: "currency", width: 100},
                    {title: "Durum", field: "status", width: 120,
                     formatter: function(cell) {
                         const value = cell.getValue();
                         const colors = {
                             'Onaylandı': 'bg-success/10 text-success',
                             'Ödendi': 'bg-primary/10 text-primary',
                             'İşlemde': 'bg-warning/10 text-warning'
                         };
                         return `<span class="px-2 py-1 rounded-full text-xs ${colors[value] || 'bg-gray-100 text-gray-600'}">${value}</span>`;
                     }
                    }
                ]
            });

            // TODO: Implement Supabase real-time subscriptions for data updates
            // TODO: Add form validation and business logic for financial transactions
            // TODO: Implement role-based access control
            // TODO: Add Turkish tax compliance calculations
            // TODO: Integrate with e-invoice systems
            
        })();
    </script>
</body>
</html>